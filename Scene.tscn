[gd_scene load_steps=19 format=3 uid="uid://jwsyx0txfeox"]

[ext_resource type="Script" uid="uid://cmc1k5o7mus65" path="res://addons/hammer/Player.gd" id="1_t6lng"]
[ext_resource type="Script" uid="uid://dm0oviqoew42y" path="res://addons/hammer/Character.gd" id="2_4cvuw"]
[ext_resource type="Script" uid="uid://tdpkyvrvi4vc" path="res://addons/hammer/PickTool.gd" id="2_j2eoc"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_t6lng"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_4cvuw"]
sky_material = SubResource("ProceduralSkyMaterial_t6lng")

[sub_resource type="Environment" id="Environment_j2eoc"]
background_mode = 2
sky = SubResource("Sky_4cvuw")
tonemap_mode = 2

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_t6lng"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_j2eoc"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_4cvuw"]

[sub_resource type="NavigationMesh" id="NavigationMesh_4cvuw"]
vertices = PackedVector3Array(-1.5, 0.335786, -6.25, 0, 0.335786, -6.5, 0, 0.335786, -24.5, -24.5, 0.335786, -24.5, -24.5, 0.335786, -4.75, -1.5, 0.335786, -4.75, 1.75, 0.335786, -3.75, 1, 0.335786, -3.25, 3.5, 0.335786, -1.25, 1.75, 0.335786, -6.25, 6.5, 0.335786, -1.25, 24.5, 0.335786, -1.25, 24.5, 0.335786, -24.5, -0.5, 2.33579, -5.5, -0.5, 2.33579, -4.5, 0.5, 2.33579, -4.5, 0.5, 2.33579, -5.5, -0.25, 0.335786, -5.25, -0.25, 0.335786, -4.5, 0.5, 0.335786, -4.5, 0.5, 0.335786, -5.25, 5, 1.83579, 0.5, 5, 1.83579, -0.5, 3.5, 0.585786, -0.5, 3.25, 0.335786, 0.75, 5, 0.335786, 24.5, 5, 0.335786, 1.75, 3.5, 0.335786, 1.75, -1.25, 0.335786, -3.25, -24.5, 0.335786, 24.5, 6.5, 0.585786, 0.5, 6.5, 0.585786, -0.5, 6.75, 0.335786, 1.5, 6.25, 0.335786, 1.75, 24.5, 0.335786, 2, 24.5, 0.335786, 24.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(0, 5, 4), PackedInt32Array(8, 7, 6), PackedInt32Array(6, 9, 8), PackedInt32Array(8, 9, 10), PackedInt32Array(10, 9, 11), PackedInt32Array(11, 9, 2), PackedInt32Array(11, 2, 12), PackedInt32Array(9, 1, 2), PackedInt32Array(16, 15, 13), PackedInt32Array(13, 15, 14), PackedInt32Array(20, 19, 17), PackedInt32Array(17, 19, 18), PackedInt32Array(22, 21, 23), PackedInt32Array(23, 21, 24), PackedInt32Array(27, 26, 25), PackedInt32Array(23, 24, 8), PackedInt32Array(8, 24, 7), PackedInt32Array(4, 5, 28), PackedInt32Array(24, 27, 7), PackedInt32Array(7, 27, 28), PackedInt32Array(27, 25, 28), PackedInt32Array(28, 25, 4), PackedInt32Array(4, 25, 29), PackedInt32Array(31, 30, 22), PackedInt32Array(22, 30, 21), PackedInt32Array(34, 33, 32), PackedInt32Array(32, 30, 31), PackedInt32Array(31, 10, 32), PackedInt32Array(32, 10, 11), PackedInt32Array(32, 11, 34), PackedInt32Array(33, 34, 26), PackedInt32Array(26, 34, 35), PackedInt32Array(26, 35, 25)]

[sub_resource type="PlaneMesh" id="PlaneMesh_t6lng"]
size = Vector2(50, 50)

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_t6lng"]

[sub_resource type="BoxShape3D" id="BoxShape3D_t6lng"]
size = Vector3(2, 2, 2)

[sub_resource type="BoxMesh" id="BoxMesh_t6lng"]
size = Vector3(2, 2, 2)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_j2eoc"]
friction = 0.8
bounce = 2.0
absorbent = true

[sub_resource type="BoxShape3D" id="BoxShape3D_j2eoc"]
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="BoxMesh" id="BoxMesh_7mckg"]
size = Vector3(0.5, 0.5, 0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_7mckg"]

[node name="Scene" type="Node3D"]

[node name="Environment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_j2eoc")

[node name="Light" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="Player" type="CharacterBody3D" parent="." node_paths=PackedStringArray("HeadNode", "CurrentTool", "ToolRay")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
script = ExtResource("1_t6lng")
HeadNode = NodePath("Camera")
CurrentTool = NodePath("PickTool")
ToolRay = NodePath("Camera/Ray")

[node name="Shape" type="CollisionShape3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
shape = SubResource("CapsuleShape3D_t6lng")

[node name="Camera" type="Camera3D" parent="Player"]
current = true

[node name="Ray" type="RayCast3D" parent="Player/Camera"]
target_position = Vector3(0, 0, -10)
collide_with_areas = true

[node name="Marker" type="Marker3D" parent="Player/Camera"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.5)

[node name="PickTool" type="Node3D" parent="Player" node_paths=PackedStringArray("ObjectPos")]
script = ExtResource("2_j2eoc")
ObjectPos = NodePath("../Camera/Marker")
metadata/_custom_type_script = "uid://tdpkyvrvi4vc"

[node name="Character" type="CharacterBody3D" parent="." node_paths=PackedStringArray("TargetNode", "NavAgent")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 1.5, 0)
script = ExtResource("2_4cvuw")
TargetNode = NodePath("NavAgent/Marker")
NavAgent = NodePath("NavAgent")
metadata/_edit_group_ = true

[node name="Shape" type="CollisionShape3D" parent="Character"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
shape = SubResource("CapsuleShape3D_j2eoc")

[node name="Mesh" type="MeshInstance3D" parent="Character"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
mesh = SubResource("CapsuleMesh_4cvuw")

[node name="NavAgent" type="NavigationAgent3D" parent="Character"]
path_height_offset = -1.0
debug_enabled = true

[node name="Marker" type="Marker3D" parent="Character/NavAgent"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1.5, -8)

[node name="NavRegion" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_4cvuw")

[node name="Floor" type="StaticBody3D" parent="NavRegion"]
metadata/_edit_group_ = true

[node name="Mesh" type="MeshInstance3D" parent="NavRegion/Floor"]
mesh = SubResource("PlaneMesh_t6lng")

[node name="Shape" type="CollisionShape3D" parent="NavRegion/Floor"]
shape = SubResource("WorldBoundaryShape3D_t6lng")

[node name="Cube" type="StaticBody3D" parent="NavRegion"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -5)
metadata/_edit_group_ = true

[node name="Shape" type="CollisionShape3D" parent="NavRegion/Cube"]
shape = SubResource("BoxShape3D_t6lng")

[node name="Mesh" type="MeshInstance3D" parent="NavRegion/Cube"]
mesh = SubResource("BoxMesh_t6lng")

[node name="Ramp" type="StaticBody3D" parent="NavRegion"]
transform = Transform3D(0.707107, -0.707107, 0, 0.707107, 0.707107, 0, 0, 0, 1, 5, 0, 0)
metadata/_edit_group_ = true

[node name="Shape" type="CollisionShape3D" parent="NavRegion/Ramp"]
shape = SubResource("BoxShape3D_t6lng")

[node name="Mesh" type="MeshInstance3D" parent="NavRegion/Ramp"]
mesh = SubResource("BoxMesh_t6lng")

[node name="Rigid" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, -2)
physics_material_override = SubResource("PhysicsMaterial_j2eoc")

[node name="Shape" type="CollisionShape3D" parent="Rigid"]
shape = SubResource("BoxShape3D_j2eoc")

[node name="Mesh" type="MeshInstance3D" parent="Rigid"]
mesh = SubResource("BoxMesh_7mckg")

[node name="Area" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 1, 0)
metadata/_edit_group_ = true

[node name="Shape" type="CollisionShape3D" parent="Area"]
shape = SubResource("BoxShape3D_7mckg")
